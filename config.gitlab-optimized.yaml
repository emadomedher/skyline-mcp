apis:
  - name: gitlab
    spec_url: https://gitlab.example.com/api/graphql
    base_url_override: https://gitlab.example.com/api/graphql
    auth:
      type: bearer
      token: glpat-REDACTED-TOKEN-2
    
    # GraphQL Type-Based Optimization
    optimization:
      enable_crud_grouping: true   # Merge create/update/set operations
      flatten_inputs: true          # Flatten InputObject types
      response_mode: essential      # Return only scalar fields
      
      type_profiles:
        # Issues: Fully optimized
        Issue:
          group_mutations: true
          response_fields: [id, iid, title, state, webUrl]
        
        # Projects: Essential fields only
        Project:
          response_fields: [id, name, fullPath, webUrl, defaultBranch]
        
        # Merge Requests: Key workflow fields
        MergeRequest:
          group_mutations: true
          response_fields: [id, iid, title, state, sourceBranch, targetBranch, webUrl]
    
    # Type-based filtering (keep only essential types)
    filter:
      mode: allowlist
      operations:
        # Projects
        - operation_id: "query_project"
        - operation_id: "query_projects"
        
        # Issues (CRUD pattern will group these)
        - operation_id: "*issue*"
          summary: "Issue operations"
        
        # Merge Requests (CRUD pattern will group these)
        - operation_id: "*mergeRequest*"
          summary: "MR operations"
        
        # CI/CD
        - operation_id: "*pipeline*"
          summary: "Pipeline operations"
        - operation_id: "*job*"
          summary: "Job operations"
        
        # Users
        - operation_id: "query_user"
        - operation_id: "query_users"
        - operation_id: "query_currentUser"
        
        # Comments
        - operation_id: "*Note*"
          summary: "Comment operations"

timeout_seconds: 30
retries: 2
